---
title: ngx_http_oidc_module ‚≠êÔ∏è
description: ngx_http_oidc_module ‚≠êÔ∏è
toc: true
nd-org-source: http/ngx_http_oidc_module.xml
nd-plus: true
nd-partial-plus: false
---


<!--
********************************************************************************
üõë WARNING: AUTOGENERATED FILE - DO NOT EDIT üõë
This Markdown file was automatically generated from the source XML documentation.
Any manual changes made directly to this file will be overwritten.
To request or suggest changes, please edit the source XML files instead.
https://github.com/nginx/nginx.org/tree/main/xml/en
********************************************************************************
-->


The `ngx_http_oidc_module` module (1.27.4)
implements authentication as a Relying Party in OpenID Connect using the
[
Authorization Code Flow](https://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth).

The module expects the OpenID Provider's configuration to be available via
[
metadata](https://openid.net/specs/openid-connect-discovery-1_0.html#ProviderConfig) and requires dynamic
[resolver](/nginx/module-reference/http/ngx_http_core_module#resolver).

The module can be combined with other access modules
via the [satisfy](/nginx/module-reference/http/ngx_http_core_module#satisfy) directive.
Note that the module may still block requests even with
`satisfy any;`
as an OpenID Provider might not redirect the user back to nginx.

This module is available as part of our
commercial subscription.
## Example Configuration


```nginx
http {
    resolver 10.0.0.1;

    oidc_provider my_idp {
        issuer        "https://provider.domain";
        client_id     "unique_id";
        client_secret "unique_secret";
    }

    server {
        location / {
            auth_oidc my_idp;

            proxy_set_header username $oidc_claim_sub;
            proxy_pass       http://backend;
        }
    }
}

```


The example assumes that the
‚Äú`https://<nginx-host>/oidc_callback`‚Äù
Redirection URI is configured on the OpenID Provider's side.
The path can be customized with the [](#redirect_uri) directive.
## Directives

### oidc_provider

{{< call-out >}}

**Syntax:** oidc_provider `name`

**Default:** -

**Context:** http


{{</call-out>}}


Defines an OpenID Provider for use with the [](#auth_oidc) directive.
### auth_oidc

{{< call-out >}}

**Syntax:** auth_oidc `name` | `off`

**Default:** off

**Context:** http, server, location


{{</call-out>}}


Enables end user authentication with the
[specified](#oidc_provider) OpenID Provider.

The special value `off` cancels the effect
of the `auth_oidc` directive
inherited from the previous configuration level.
### issuer

{{< call-out >}}

**Syntax:** issuer `URL`

**Default:** -

**Context:** oidc_provider


{{</call-out>}}


Sets the Issuer Identifier URL of the OpenID Provider;
required directive.
The URL must exactly match the value of ‚Äú`issuer`‚Äù
in the OpenID Provider metadata
and requires the ‚Äú`https`‚Äù scheme.
### client_id

{{< call-out >}}

**Syntax:** client_id `string`

**Default:** -

**Context:** oidc_provider


{{</call-out>}}


Specifies the client ID of the Relying Party;
required directive.
### client_secret

{{< call-out >}}

**Syntax:** client_secret `string`

**Default:** -

**Context:** oidc_provider


{{</call-out>}}


Specifies a secret value
used to authenticate the Relying Party with the OpenID Provider.
### config_url

{{< call-out >}}

**Syntax:** config_url `URL`

**Default:** <issuer>/.well-known/openid-configuration

**Context:** oidc_provider


{{</call-out>}}


Sets a custom URL to retrieve the OpenID Provider metadata.
### cookie_name

{{< call-out >}}

**Syntax:** cookie_name `name`

**Default:** NGX_OIDC_SESSION

**Context:** oidc_provider


{{</call-out>}}


Sets the name of a session cookie.
### extra_auth_args

{{< call-out >}}

**Syntax:** extra_auth_args `string`

**Default:** -

**Context:** oidc_provider


{{</call-out>}}


Sets additional query arguments for the
[authentication
request](https://openid.net/specs/openid-connect-core-1_0.html#AuthRequest) URL.

```nginx
extra_auth_args "display=page&prompt=login";

```

### redirect_uri

{{< call-out >}}

**Syntax:** redirect_uri `uri`

**Default:** /oidc_callback

**Context:** oidc_provider


{{</call-out>}}


Defines the Redirection URI path for post-authentication redirects
expected by the module from the OpenID Provider.
The `uri` must match the configuration on the Provider's side.
### scope

{{< call-out >}}

**Syntax:** scope `scope` ...

**Default:** openid

**Context:** oidc_provider


{{</call-out>}}


Sets requested scopes.
The `openid` scope is always required by OIDC.
### session_store

{{< call-out >}}

**Syntax:** session_store `name`

**Default:** -

**Context:** oidc_provider


{{</call-out>}}


Specifies a custom
[key-value database](/nginx/module-reference/http/ngx_http_keyval_module#keyval_zone)
that stores session data.
By default, an 8-megabyte key-value database named 
`oidc_default_store_<provider name>`
is created automatically.

A separate key-value database should be configured for each Provider
to prevent session reuse across providers.
### session_timeout

{{< call-out >}}

**Syntax:** session_timeout `time`

**Default:** 8h

**Context:** oidc_provider


{{</call-out>}}


Sets a timeout after which the session is deleted, unless it was
[refreshed](https://openid.net/specs/openid-connect-core-1_0.html#RefreshTokens).
### ssl_crl

{{< call-out >}}

**Syntax:** ssl_crl `file`

**Default:** -

**Context:** oidc_provider


{{</call-out>}}


Specifies a `file` with revoked certificates (CRL)
in the PEM format used to verify
the certificates of the OpenID Provider endpoints.
### ssl_trusted_certificate

{{< call-out >}}

**Syntax:** ssl_trusted_certificate `file`

**Default:** system CA bundle

**Context:** oidc_provider


{{</call-out>}}


Specifies a `file` with trusted CA certificates in the PEM format
used to verify
the certificates of the OpenID Provider endpoints.
## Embedded Variables


The `ngx_http_oidc_module` module supports embedded variables:
`$oidc_id_token`
ID token
`$oidc_access_token`
access token
`$oidc_claim_``name`
top-level ID token claim

Nested claims can be fetched with the
[auth_jwt](/nginx/module-reference/http/ngx_http_auth_jwt_module) module:

```nginx
http {
    auth_jwt_claim_set $postal_code address postal_code;

    server {
        location / {
            auth_oidc my_idp;
            auth_jwt  off token=$oidc_id_token;

            proxy_set_header x-postal_code $postal_code;
            proxy_pass       http://backend;
        }
    }
}

```

