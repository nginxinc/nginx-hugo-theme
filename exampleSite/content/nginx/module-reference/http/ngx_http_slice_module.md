---
title: ngx_http_slice_module
description: ngx_http_slice_module
toc: true
nd-org-source: http/ngx_http_slice_module.xml
nd-plus: false
nd-partial-plus: false
---


<!--
      ********************************************************************************
      ðŸ›‘ WARNING: AUTOGENERATED FILE - DO NOT EDIT ðŸ›‘ This Markdown file was
      automatically generated from the source XML documentation. Any manual
      changes made directly to this file will be overwritten. To request or
      suggest changes, please edit the source XML files instead.
      https://github.com/nginx/nginx.org/tree/main/xml/en
      ********************************************************************************
      -->


The `ngx_http_slice_module` module (1.9.8) is a filter
that splits a request into subrequests,
each returning a certain range of response.
The filter provides more effective caching of big responses.

This module is not built by default, it should be enabled with the
`--with-http_slice_module`
configuration parameter.
## Known Issues


Currently, the module does not work as expected in subrequests such as
[
background cache update](/nginx/module-reference/http/ngx_http_proxy_module#proxy_cache_background_update).
In this case, a request is constructed without byte-range support.
## Example Configuration


```nginx
location / {
    slice             1m;
    proxy_cache       cache;
    proxy_cache_key   $uri$is_args$args$slice_range;
    proxy_set_header  Range $slice_range;
    proxy_cache_valid 200 206 1h;
    proxy_pass        http://localhost:8000;
}

```


In this example,
the response is split into 1-megabyte cacheable slices.
## Directives

### slice

{{< call-out >}}

**Syntax:** slice `size`

**Default:** 0

**Context:** http, server, location


{{</call-out>}}


Sets the `size` of the slice.
The zero value disables splitting responses into slices.
Note that a too low value may result in excessive memory usage
and opening a large number of files.

In order for a subrequest to return the required range,
the `$slice_range` variable should be
[passed](/nginx/module-reference/http/ngx_http_proxy_module#proxy_set_header) to
the proxied server as the `Range` request header field.
If
[caching](/nginx/module-reference/http/ngx_http_proxy_module#proxy_cache)
is enabled, `$slice_range` should be added to the
[cache key](/nginx/module-reference/http/ngx_http_proxy_module#proxy_cache_key)
and caching of responses with 206 status code should be
[enabled](/nginx/module-reference/http/ngx_http_proxy_module#proxy_cache_valid).
## Embedded Variables


The `ngx_http_slice_module` module
supports the following embedded variables:
`$slice_range`
the current slice range in
[HTTP
byte range](https://datatracker.ietf.org/doc/html/rfc7233#section-2.1) format,
for example, `bytes=0-1048575`.
