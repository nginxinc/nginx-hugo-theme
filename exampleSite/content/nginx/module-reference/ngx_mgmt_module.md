---
title: ngx_mgmt_module ‚≠êÔ∏è
description: ngx_mgmt_module ‚≠êÔ∏è
toc: true
nd-org-source: ngx_mgmt_module.xml
nd-plus: true
nd-partial-plus: false
---


<!--
********************************************************************************
üõë WARNING: AUTOGENERATED FILE - DO NOT EDIT üõë
This Markdown file was automatically generated from the source XML documentation.
Any manual changes made directly to this file will be overwritten.
To request or suggest changes, please edit the source XML files instead.
https://github.com/nginx/nginx.org/tree/main/xml/en
********************************************************************************
-->


The `ngx_mgmt_module` module enables
NGINX Plus license verification and usage reporting.
This is mandatory for each
[`nginx/1.27.2 (nginx-plus-r33)`](https://docs.nginx.com/nginx/releases/#nginxplusrelease-33-r33) instance.

A JWT license file named `license.jwt`
should be located at
`/etc/nginx/` for Linux or
`/usr/local/etc/nginx/` for FreeBSD
or at the path specified by the [](#license_token) directive.
The license file is available from
[MyF5](https://my.f5.com).

Usage report is sent directly or via [proxy](#proxy)
to F5 licensing endpoint
[every hour](#usage_report) using the
[secure](#ssl_verify) connection.
Optionally, in network-restricted environments
reporting can be [configured](#usage_report) to
[F5 NGINX
Instance Manager](https://docs.nginx.com/nginx-management-suite/about/) from which the report can be sent
to F5 licensing endpoint.

By default, if the [initial usage report](#enforce_initial_report)
is not received by F5 licensing endpoint, nginx will stop processing traffic.

This module is available as part of our
commercial subscription.
## Example Configuration


```nginx
mgmt {
    # in case if custom path is required
    license_token custom/file/path/license.jwt;

    # in case of reporting to NGINX Instance Manager
    usage_report endpoint=NIM_FQDN;
}

```

## Directives

### mgmt

{{< call-out >}}

**Syntax:** mgmt 

**Default:** -

**Context:** main


{{</call-out>}}


Provides the configuration file context in which
usage reporting and license management directives
are specified.
### enforce_initial_report

{{< call-out >}}

**Syntax:** enforce_initial_report `on` | `off`

**Default:** on

**Context:** mgmt

_This directive appeared in version 1.27.2._


{{</call-out>}}


Enables or disables the 180-day grace period
for sending the initial usage report.

The initial usage report is sent immediately
upon nginx first start after installation.
By default, if the initial report is not received by F5 licensing endpoint,
nginx stops processing traffic until the report is successfully delivered.
Setting the directive value to `off` enables
the 180-day grace period during which
the initial usage report must be received by F5 licensing endpoint.
### license_token

{{< call-out >}}

**Syntax:** license_token `file`

**Default:** license.jwt

**Context:** mgmt

_This directive appeared in version 1.27.2._


{{</call-out>}}


Specifies a JWT license `file`.
By default, the `license.jwt` file is expected to be at
`/etc/nginx/` for Linux or at
`/usr/local/etc/nginx/` for FreeBSD.
### proxy

{{< call-out >}}

**Syntax:** proxy `host` : `port`

**Default:** -

**Context:** mgmt

_This directive appeared in version 1.27.4._


{{</call-out>}}


Sets the HTTP CONNECT proxy
used for sending the usage report.
### proxy_username

{{< call-out >}}

**Syntax:** proxy_username `string`

**Default:** -

**Context:** mgmt

_This directive appeared in version 1.27.4._


{{</call-out>}}


Sets the user name used for authentication on
the [proxy](#proxy).
### proxy_password

{{< call-out >}}

**Syntax:** proxy_password `string`

**Default:** -

**Context:** mgmt

_This directive appeared in version 1.27.4._


{{</call-out>}}


Sets the password used for authentication on
the [proxy](#proxy).

The password is sent unencrypted by default.
If the proxy supports TLS, the connection to the proxy can be
protected with the [stream](/nginx/module-reference/stream/ngx_stream_proxy_module)
module:

```nginx
mgmt {
    proxy          127.0.0.1:8080;
    proxy_username <name>;
    proxy_password <password>;
}

stream {
    server {
        listen 127.0.0.1:8080;
        
        proxy_ssl                     on;
        proxy_ssl_verify              on;
        proxy_ssl_trusted_certificate <proxy_ca_file>;

        proxy_pass <proxy_host>:<proxy_port>;
    }
}

```

### resolver

{{< call-out >}}

**Syntax:** resolver `address` ... [ `valid` = `time` ] [ `ipv4` = `on` | `off` ] [ `ipv6` = `on` | `off` ] [ `status_zone` = `zone` ]

**Default:** -

**Context:** mgmt


{{</call-out>}}


Configures name servers used to resolve usage reporting endpoint name.
By default, the system resolver is used.

See [resolver](/nginx/module-reference/http/ngx_http_core_module#resolver) for details.
### ssl_crl

{{< call-out >}}

**Syntax:** ssl_crl `file`

**Default:** -

**Context:** mgmt


{{</call-out>}}


Specifies a `file` with revoked certificates (CRL)
in the PEM format used to [verify](#ssl_verify)
the certificate of the usage reporting endpoint.
### ssl_trusted_certificate

{{< call-out >}}

**Syntax:** ssl_trusted_certificate `file`

**Default:** system CA bundle

**Context:** mgmt


{{</call-out>}}


Specifies a `file` with trusted CA certificates in the PEM format
used to [verify](#ssl_verify)
the certificate of the usage reporting endpoint.
### ssl_verify

{{< call-out >}}

**Syntax:** ssl_verify `on` | `off`

**Default:** on

**Context:** mgmt


{{</call-out>}}


Enables or disables verification of the usage reporting endpoint certificate.

Before 1.27.2, the default value was `off`.
### state_path

{{< call-out >}}

**Syntax:** state_path `path`

**Default:** -

**Context:** mgmt

_This directive appeared in version 1.27.2._


{{</call-out>}}


Defines a directory for storing state files
(`nginx-mgmt-*`)
created by the `ngx_mgmt_module` module.
The default directory
for Linux is `/var/lib/nginx/state`,
for FreeBSD is `/var/db/nginx/state`.
### usage_report

{{< call-out >}}

**Syntax:** usage_report [ `endpoint` = `address` ] [ `interval` = `time` ]

**Default:** endpoint=product.connect.nginx.com interval=1h

**Context:** mgmt


{{</call-out>}}


Sets the `address` and `port`
of the usage reporting endpoint.
The `interval` parameter sets an interval between
two consecutive reports.

Before 1.27.2, the default values were
`nginx-mgmt.local` and
`30m`.
