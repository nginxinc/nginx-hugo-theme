---
title: ngx_stream_mqtt_preread_module ‚≠êÔ∏è
description: ngx_stream_mqtt_preread_module ‚≠êÔ∏è
toc: true
nd-org-source: stream/ngx_stream_mqtt_preread_module.xml
nd-plus: true
nd-partial-plus: false
---


<!--
********************************************************************************
üõë WARNING: AUTOGENERATED FILE - DO NOT EDIT üõë
This Markdown file was automatically generated from the source XML documentation.
Any manual changes made directly to this file will be overwritten.
To request or suggest changes, please edit the source XML files instead.
https://github.com/nginx/nginx.org/tree/main/xml/en
********************************************************************************
-->


The `ngx_stream_mqtt_preread_module` module (1.23.4) allows
extracting information from the CONNECT message
of the Message Queuing Telemetry Transport protocol (MQTT) versions
[3.1.1](https://docs.oasis-open.org/mqtt/mqtt/v3.1.1/mqtt-v3.1.1.html)
and
[5.0](https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html),
for example, a username or a client ID.

This module is available as part of our
commercial subscription.
## Example Configuration


```nginx
mqtt_preread on;
return       $mqtt_preread_clientid;

```

## Directives

### mqtt_preread

{{< call-out >}}

**Syntax:** mqtt_preread `on` | `off`

**Default:** off

**Context:** stream, server


{{</call-out>}}


Enables extracting information from the MQTT CONNECT message at
the [preread](/nginx/module-reference/stream/stream_processing#preread_phase) phase.
## Embedded Variables

`$mqtt_preread_clientid`
the `clientid` value from the CONNECT message
`$mqtt_preread_username`
the `username` value from the CONNECT message
