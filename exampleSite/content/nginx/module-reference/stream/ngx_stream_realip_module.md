---
title: ngx_stream_realip_module
description: ngx_stream_realip_module
toc: true
nd-org-source: stream/ngx_stream_realip_module.xml
nd-plus: false
nd-partial-plus: false
---


<!--
      ********************************************************************************
      ðŸ›‘ WARNING: AUTOGENERATED FILE - DO NOT EDIT ðŸ›‘ This Markdown file was
      automatically generated from the source XML documentation. Any manual
      changes made directly to this file will be overwritten. To request or
      suggest changes, please edit the source XML files instead.
      https://github.com/nginx/nginx.org/tree/main/xml/en
      ********************************************************************************
      -->


The `ngx_stream_realip_module` module is used
to change the client address and port
to the ones sent in the PROXY protocol header (1.11.4).
The PROXY protocol must be previously enabled by setting the
[proxy_protocol](/nginx/module-reference/stream/ngx_stream_core_module#proxy_protocol) parameter
in the `listen` directive.

This module is not built by default, it should be enabled with the
`--with-stream_realip_module`
configuration parameter.
## Example Configuration


```nginx
listen 12345 proxy_protocol;

set_real_ip_from  192.168.1.0/24;
set_real_ip_from  192.168.2.1;
set_real_ip_from  2001:0db8::/32;

```

## Directives

### set_real_ip_from

{{< call-out >}}

**Syntax:** set_real_ip_from `address` | `CIDR` | `unix:`

**Default:** -

**Context:** stream, server


{{</call-out>}}


Defines trusted addresses that are known to send correct
replacement addresses.
If the special value `unix:` is specified,
all UNIX-domain sockets will be trusted.
## Embedded Variables

`$realip_remote_addr`
keeps the original client address
`$realip_remote_port`
keeps the original client port
