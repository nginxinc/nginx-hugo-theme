{{ $cards := .Scratch.Get "cards" }}
{{ $showAsCards := index (.Scratch.Get "showAsCards") "main" }}
{{ $class := "card-grid wide"}}

<div class="{{ if eq $showAsCards "true" }} {{ $class }} {{ end }}">
  {{ range .Pages.ByWeight }}
  {{ $title := .Title }}
    <div class="card">
      <h2>
        <a href="{{ if .Params.url}}{{ .Params.url}}{{else}}{{ .Permalink }}{{end}}">{{ $title }}</a>
      </h2>
      {{ range $cards }}
        {{ if eq .title $title }}
            <p>{{ .content }}</p>
        {{ end }}
      {{ end }}
    </div>
  {{ end }}
</div>
{{ .Content }}