
<div class="sidebar__container">
    <div class="sidebar__header">
        <div class="sidebar__search">
          <!-- Standalone search box. -->
          {{ partial "coveo-atomic-search.html" (dict "id" "search-standalone-sidebar") }}
        </div>

        <!-- <div class="header__product-selector">
            {{ $nginxProducts := slice
                (dict "title" "NGINX One Console" "url" "/nginx-one" "type" "nginx-one")
                (dict "title" "NGINX Plus" "url" "/nginx" "type" "nginx-one")
                (dict "title" "NGINX Instance Manager" "url" "/nginx-instance-manager" "type" "nginx-one")
                (dict "title" "NGINX Ingress Controller" "url" "/nginx-ingress-controller" "type" "nginx-one")
                (dict "title" "NGINX Gateway Fabric" "url" "/nginx-gateway-fabric" "type" "nginx-one")
                (dict "title" "NGINX Open Source" "url" "https://nginx.org/en/docs/" "type" "nginx-one")
                (dict "title" "NGINX Agent" "url" "/nginx-agent" "type" "nginx-one")
                (dict "title" "NGINX App Protect WAF" "url" "/nginx-app-protect-waf" "type" "nginx-app-protect")
                (dict "title" "NGINX App Protect DoS" "url" "/nginx-app-protect-dos" "type" "nginx-app-protect")
                (dict "title" "NGINX as a Service for Azure" "url" "/nginxaas/azure/" "type" "nginx-as-a-service")
                (dict "title" "NGINX Unit" "url" "https://unit.nginx.org/" "type" "nginx-other")
            }}
            {{ $productMap := dict }}
            {{ range $nginxProducts }}
                {{ if not (or (eq .title "NGINX Open Source" ) (eq .title "NGINX Unit")) }}
                  {{ $productId := index (split .url "/") 1 }}
                  {{ $productMap = merge $productMap (dict $productId .title) }}
                {{ end }}
            {{ end }}
            {{ $relPermalink := .RelPermalink }}
            {{ $productIdentifier := index ((split $relPermalink "/")) 1 }}
            {{ $productName := index $productMap $productIdentifier | default "Product Documentation" }}

            <button class="product-selector__button" id="product-selector-button">
                {{/* product name and selector */}}
                <span class="product-name">{{ $productName }}</span>
                <span class="product-selector-button-icon">
                    <svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1 13L7 7L0.999999 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </span>
            </button>
            <div class="product-selector" id="product-selector" style="display: none">
                {{ $groupedProducts := dict
                    "nginx-one" (where $nginxProducts "type" "nginx-one")
                    "nginx-app-protect" (where $nginxProducts "type" "nginx-app-protect")
                    "nginx-as-a-service" (where $nginxProducts "type" "nginx-as-a-service")
                    "nginx-other" (where $nginxProducts "type" "nginx-other")
                }}
                {{ $orderedKeys := slice "nginx-one" "nginx-app-protect" "nginx-as-a-service" "nginx-other" }}
                {{ range $orderedKeys }}
                {{ $type := . }}
                {{ $products := index $groupedProducts $type }}
                    <div class="product-selector-content" id="product-selector-content">
                        <p>{{ $type | humanize | title | upper }}</p>
                        <ul>
                        {{ range $products }}
                            <li>
                                <a href="{{ .url }}">{{ .title }}</a>
                            </li>
                        {{ end }}
                        </ul>
                    </div>
                {{ end }}
            </div>
        </div> -->

        <div class="product-selector">
            <details class="product-selector__section">
                <summary class="product-selector__toggle">
                    <span class="product-selector__toggle-text">NGINX One</span>
                    <span class="product-selector__chevron">
                      {{ partial "lucide" (dict "context" . "icon" "chevron-right") }}
                    </span>
                </summary>
                <div class="product-selector__content">
                {{ with index .Site.Data "product-selector" }}
                  {{ $groups := sort . "order" }}
                  {{ range $group := $groups }}
                    <h3 class="product-selector__product-group">{{ upper (replace $group.productGroup "-" " ") }}</h3>
                    <ul>
                      {{ $products := sort $group.products "productOrder" }}
                      {{ range $product := $products }}
                        <li class="product-selector__product"><a href="{{ $product.url }}">{{ $product.title }}</a></li>
                      {{ end }}
                    </ul>
                  {{ end }}
                {{ else }}

                  <p>Could not find the data.</p>
                {{ end }}
                </div>

            </details>

        </div>

    </div>
    <div class="sidebar__content__wrapper">

        <div class="sidebar__content">
            <a class="skip-link" href="#maincontent">Skip Navigation</a>
            {{ partial "sidebar-list.html" (dict
            "firstSection" .FirstSection
            "currentUrl" .Permalink
            "currentPage" .
            "idPrefix" ""
          ) }}
        </div>
    </div>

</div>
